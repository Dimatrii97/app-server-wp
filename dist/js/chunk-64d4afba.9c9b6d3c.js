(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64d4afba"],{"1c87":function(t,s,e){"use strict";var a=e("1de6"),i=e.n(a);i.a},"1de6":function(t,s,e){},a623:function(t,s,e){"use strict";var a=e("23e7"),i=e("b727").every,n=e("a640"),r=e("ae40"),c=n("every"),o=r("every");a({target:"Array",proto:!0,forced:!c||!o},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},be80:function(t,s,e){},cb92:function(t,s,e){"use strict";var a=e("be80"),i=e.n(a);i.a},fd62:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"page"},[e("h2",{staticClass:"main-title"},[t._v("Календарь")]),e("div",{staticClass:"calendar__wrapper"},[e("div",{staticClass:"calendar__container"},[e("article",{staticClass:"substrate"},[e("Calendar-Body",{attrs:{activeDay:t.activeDay,visibleMonth:t.visibleMonth,month:t.getMonth},on:{"set-day":function(s){return t.setActiveDay(s)}},scopedSlots:t._u([{key:"header",fn:function(){return[e("Calendar-Header",{attrs:{visibleMonth:t.visibleMonth},on:{back:function(s){return t.m_back()},next:function(s){return t.m_next()}}})]},proxy:!0},{key:"events",fn:function(s){return[e("div",{class:["tasks",{phontom:t.hide(s.tasks)}]},t._l(t.sliceHide(s.tasks),(function(t,s){return e("div",{key:s,staticClass:"task",style:{backgroundColor:t.color}})})),0)]}}])})],1)]),e("div",{staticClass:"calendar__tasks"},[e("article",{staticClass:"substrate"},t._l(t.getTasksDay,(function(s){return e("Calendar-Task-List",{key:s.id,attrs:{isOpen:s.id===t.openTaskId,task:s},on:{open:function(s){return t.toggleTask(s)}}})})),1)])])])},i=[],n=(e("4de4"),e("d81d"),e("fb6a"),e("5530")),r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"task-list",style:{backgroundColor:t.task.color},on:{click:function(s){return t.open()}}},[e("div",{staticClass:"task-list__row"},[e("h3",{staticClass:"task-list__title"},[t._v(" "+t._s(t.task.title)+" ")]),e("div",{class:["task-list__users",{phontom:t.hide}]},t._l(t.sliceHide,(function(t,s){return e("img-user",{key:s,staticClass:"user-item",attrs:{src:{img:t.img,name:t.name},className:"sm"}})})),1)]),e("transition-expand",[t.isOpen?e("div",{staticClass:"task-list__all",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"task-list__subtitle"},[e("h3",{staticClass:"task-list__title"},[t._v("Задача:")]),e("p",{staticClass:"task-list__text",domProps:{innerHTML:t._s(t.additionalInfo.subtitle)}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.additionalInfo.subtasks.length,expression:"additionalInfo.subtasks.length"}]},[e("h3",{staticClass:"task-list__title"},[t._v("Структура выполнения:")]),e("ul",{staticClass:"subtasks"},t._l(t.additionalInfo.subtasks,(function(s){var a;return e("li",{key:s.id},[s.status?e("div",{staticClass:"subtasks__item"},[e("div",{staticClass:"circle com"},[e("i",{staticClass:"icon-check"})]),e("p",{staticClass:"task-list__text"},[t._v(t._s(s.title))])]):e("div",{staticClass:"subtasks__item",on:{click:function(e){return t.performSubTask(s.id)}}},[e("div",{staticClass:"circle uncom"},[e("i",{class:(a={},a["icon-check"]=t.changes.includes(s.id),a)})]),e("p",{staticClass:"task-list__text"},[t._v(t._s(s.title))])])])})),0)]),e("div",{staticClass:"task-list__executors"},[e("h3",{staticClass:"task-list__title"},[t._v("Исполнительный состав:")]),t._l(t.users,(function(t,s){return e("v-chip",{key:s,attrs:{user:t}})})),e("v-chip",{attrs:{user:t.user}})],2),e("div",{staticClass:"task-list__date"},[e("h3",{staticClass:"task-list__title"},[t._v(" Дата начала: "),e("div",{staticClass:"task-list__text"},[t._v(t._s(t.task.startdate)+".")])]),e("h3",{staticClass:"task-list__title"},[t._v(" Дата окончания: "),e("div",{staticClass:"task-list__text"},[t._v(t._s(t.task.deadline)+".")])])]),e("div",{staticClass:"button-left"},[t.allComplite?e("button",{staticClass:"btn btn-primary",on:{click:function(s){return t.next()}}},[t._v(" Выполнить задачу ")]):e("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.changes.length},on:{click:function(s){return t.next()}}},[t._v(" Принять изменения ")])])]):t._e()])],1)},c=[],o=(e("a623"),e("caad"),e("c975"),e("a434"),e("2532"),e("cabc")),l=e("8afa"),u=e("c695"),d=e("2f62"),h={components:{ImgUser:l["a"],vChip:u["a"],TransitionExpand:o["a"]},data:function(){return{changes:[]}},props:{isOpen:{default:!1,type:Boolean},task:{default:function(){},type:Object}},mounted:function(){this.$store.dispatch("users/thereAreUsers",this.usersIdArray)},computed:Object(n["a"])(Object(n["a"])({},Object(d["b"])("user",{user:"getUserHeaderInfo"})),{},{additionalInfo:function(){return this.$store.getters["tasks/getFindAdditional"](this.$vnode.key)},users:function(){var t=this.$store.getters["users/findUserId"](this.usersIdArray);return t},sliceHide:function(){return this.users.length?this.users.slice(0,3):null},hide:function(){return this.users&&this.users.length>=4},usersIdArray:function(){return this.task.users.map((function(t){return t.id}))},allComplite:function(){return!!this.additionalInfo.subtasks&&this.additionalInfo.subtasks.every((function(t){return t.status}))}}),methods:{open:function(){this.$emit("open",this.$vnode.key),this.task.scanned||this.$store.dispatch("tasks/viewedTask",this.$vnode.key)},performSubTask:function(t){this.changes.includes(t)?this.changes.splice(this.changes.indexOf(t),1):this.changes.push(t)},updateSubTask:function(){this.$store.dispatch("tasks/updateSubTask",this.changes),this.changes=[]},completeTask:function(){this.$store.dispatch("tasks/completeTask",this.$vnode.key)},next:function(){this.changes.length?this.updateSubTask():this.completeTask(),this.showModal=!1},enter:function(t){var s=getComputedStyle(t).width;t.style.width=s,t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto";var e=getComputedStyle(t).height;t.style.width=null,t.style.position=null,t.style.visibility=null,t.style.height=0,getComputedStyle(t).height,requestAnimationFrame((function(){t.style.height=e}))}}},k=h,f=(e("cb92"),e("2877")),v=Object(f["a"])(k,r,c,!1,null,"1a7b8f93",null),_=v.exports,p=e("631d"),b=e("ef0a"),y=e("a3b9"),g=e("499d"),m={components:{CalendarBody:b["a"],CalendarHeader:p["a"],CalendarTaskList:_},mixins:[y["a"]],data:function(){return{activeDay:new Date,visibleMonth:new Date,tasksDay:[],openTaskId:""}},computed:Object(n["a"])(Object(n["a"])({},Object(d["b"])("tasks",{events:"getTasks"})),{},{getMonth:function(){return g["a"].createMonth(this.visibleMonth).setTasks(this.events).getMonth()},getTasksDay:function(){var t=this;return this.events.filter((function(s){return t.isWithinInterval(s.startdate,s.deadline)}))}}),watch:{getTasksDay:function(t){this.$store.dispatch("tasks/thereAreTaskInfo",t.map((function(t){return t.id})))}},methods:{setActiveDay:function(t){this.activeDay=t},toggleTask:function(t){this.openTaskId==t?this.openTaskId="":this.openTaskId=t},setTasks:function(t){this.tasksDay=t},isWithinInterval:function(t,s){var e=new Date(t).setHours(0,0,0,0),a=new Date(s).setHours(0,0,0,0),i=e<=this.activeDay,n=this.activeDay<=a;return i&&n},sliceHide:function(t){return t?t.slice(0,3):null},hide:function(t){return t&&t.length>4}}},C=m,T=(e("1c87"),Object(f["a"])(C,a,i,!1,null,"d8d2a6bc",null));s["default"]=T.exports}}]);
//# sourceMappingURL=chunk-64d4afba.9c9b6d3c.js.map