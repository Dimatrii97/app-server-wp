(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25ea1742"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"160a":function(t,e,i){"use strict";var n=i("a613"),s=i.n(n);s.a},"317d":function(t,e,i){},3647:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"page"},[i("h3",{staticClass:"main-title"},[t._v("Создать новую задачу")]),i("article",{staticClass:"substrate"},[i("FormFactory",{attrs:{fields:t.fields},on:{input:function(e){return t.inputValue(e)}},scopedSlots:t._u([{key:"button",fn:function(e){return[i("div",{staticClass:"button-left m110"},[i("button",{staticClass:"btn btn-primary",attrs:{disabled:e.valid}},[t._v(" Отправить ")])])]}}])}),i("div",{staticClass:"test"})],1)])},s=[],a=(i("d81d"),i("ac1f"),i("5319"),i("1276"),i("3835")),r=i("2909"),c=i("5530"),o=i("79ae"),u=i("d4ec"),l=i("bee2"),d=i("cece"),p=function(){function t(e){Object(u["a"])(this,t),this.props=Object(c["a"])({},e)}return Object(l["a"])(t,[{key:"withProvider",value:function(t){return this.provider=t,this}},{key:"withBody",value:function(t){return this.body=t,this}},{key:"withList",value:function(t){return this.list=t,this}},{key:"setType",value:function(t){return this.props.type=t,this}},{key:"build",value:function(){var t=this.body,e=this.list,i=this.props;return{render:function(n){return n(d["a"],{props:i,on:Object(c["a"])({},this.$listeners),attrs:Object(c["a"])({},this.$attrs),scopedSlots:Object(c["a"])({default:function(e){return n(t,{props:e})},list:function(t){return n(e,{props:t})}},this.$scopedSlots)},[t])}}}}]),t}(),h=i("9c52"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["dropdown__item",{active:t.params.isActive},{selected:t.params.isSelected}]},[i("User-Img",{staticClass:"dropdown__item-img",attrs:{src:{img:t.item.img,name:t.item.name},alt:""}}),i("div",{staticClass:"user-info"},[i("span",[t._v(t._s(t.item.name))]),i("p",{staticClass:"user-info__position"},[t._v(t._s(t.item.position))])])],1)},v=[],m=i("8afa"),b={props:{item:{default:function(){},type:[Object]},params:{default:function(){},type:[Object,Array]}},components:{UserImg:m["a"]}},y=b,_=(i("fc58"),i("2877")),g=Object(_["a"])(y,f,v,!1,null,"1b5a90cc",null),k=g.exports,x=i("aa23"),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chips-group"},t._l(t.value,(function(e,n){return i("V-Chip",{key:n,attrs:{close:!0,user:e},on:{"delete-chips":function(i){return t.clickItem(e,n)}}})})),1)},O=[],C=i("c695"),j={inject:["clickItem"],components:{VChip:C["a"]},props:{value:{type:[Object,Array],default:function(){return[]}}}},$=j,S=(i("a396"),Object(_["a"])($,w,O,!1,null,"2fcf73a7",null)),I=S.exports,L=function(){function t(e){Object(u["a"])(this,t),this.builder=e}return Object(l["a"])(t,[{key:"makeSelect",value:function(){return this.builder.withBody(x["a"]).withList(h["a"]).setType("select").build()}},{key:"makeMultiSelect",value:function(){return this.builder.withBody(I).withList(k).setType("multiSelect").build()}}]),t}(),A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outside,expression:"outside"}],class:[{focus:t.isActive},"date-picker"]},[i("div",{on:{click:function(e){return t.inside()}}},[i("div",{staticClass:"form__field date"},[t._v(t._s(t.value))]),t._t("label")],2),t.isActive?i("div",{staticClass:"calendar"},[i("Calendar-Body",{attrs:{interval:t.interval,visibleMonth:t.visibleMonth,month:t.getMonth},on:{"set-day":function(e){return t.setDay(e)}},scopedSlots:t._u([{key:"header",fn:function(){return[i("Calendar-Header",{attrs:{visibleMonth:t.visibleMonth},on:{back:function(e){return t.m_back()},next:function(e){return t.m_next()}}})]},proxy:!0}],null,!1,1590844390)}),i("Calendar-Settings",{attrs:{interval:t.interval},on:{today:function(e){t.visibleMonth=new Date},change:function(e){t.interval.active=e},set:function(e){return t.emitValue()},close:function(e){t.isActive=!1}}})],1):t._e()])},U=[],E=(i("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"date-settings"},[i("div",[i("ul",{staticClass:"date-settings__list"},[i("li",{staticClass:"date-settings__item today",on:{click:function(e){return t.$emit("today")}}},[t._m(0)]),i("li",{staticClass:"date-settings__item",on:{click:function(e){return t.$emit("change","start")}}},[i("span",{class:[{active:"start"===t.interval.active}]},[i("i",{staticClass:"icon"}),t._v(" Начало ")]),i("span",[t._v(t._s(t._f("localRuDM")(t.interval.start)))])]),i("li",{staticClass:"date-settings__item",on:{click:function(e){return t.$emit("change","end")}}},[i("span",{class:[{active:"end"===t.interval.active}]},[i("i",{staticClass:"icon"}),t._v(" Конец ")]),i("span",[t._v(t._s(t._f("localRuDM")(t.interval.end)))])])]),i("div",{staticClass:"btn__group"},[i("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.$emit("set")}}},[t._v(" Установить ")]),i("button",{staticClass:"btn btn-error btn-sm",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" Закрыть ")])])])])}),D=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("i",{staticClass:"icon"}),t._v(" Сегодня ")])}],V={props:{interval:{default:function(){},type:Object}}},M=V,T=(i("7916"),Object(_["a"])(M,E,D,!1,null,"159a4b1b",null)),B=T.exports,P=i("ef0a"),N=i("631d"),q=i("a3b9"),F=i("d70d"),z=i("499d"),R=i("a7e4"),K=i("b166"),H=i("fd3a"),J=i("8c86");function G(t,e){Object(J["a"])(2,arguments);var i=Object(H["a"])(t),n=Object(H["a"])(e);return i.getTime()>n.getTime()}var Q=i("fe1f");function W(t,e){Object(J["a"])(2,arguments);var i=Object(H["a"])(t),n=Object(Q["a"])(e);return isNaN(n)?new Date(NaN):n?(i.setDate(i.getDate()+n),i):i}function X(t,e){Object(J["a"])(2,arguments);var i=Object(Q["a"])(e);return W(t,-i)}var Y=i("cc73"),Z={props:{value:{default:"",type:String}},mixins:[q["a"],F["a"]],components:{CalendarBody:P["a"],CalendarHeader:N["a"],CalendarSettings:B},data:function(){return{isActive:!1,interval:{start:new Date,end:null,active:"start"},visibleMonth:new Date}},computed:{getMonth:function(){return z["a"].createMonth(this.visibleMonth).setInterval(this.interval).getMonth()}},watch:{isActive:function(){this.$store.getters.getSize<=600&&this.bodyOverflowToggle()},value:function(t){t||(this.interval.start=new Date,this.interval.end=null,this.active="start")}},methods:{outside:function(){this.isActive=!1},inside:function(){this.isActive=!0},emitValue:function(){Object(R["a"])(this.interval.start)&&Object(R["a"])(this.interval.end)&&(this.$emit("input","".concat(Object(K["a"])(this.interval.start,"yyyy-MM-dd"),"/").concat(Object(K["a"])(this.interval.end,"yyyy-MM-dd"))),this.isActive=!1)},setDay:function(t){switch(this.interval.active){case"start":return void(this.isSetStartdate(t)&&(G(t,this.interval.end)&&(this.interval.end=null),this.interval.start=t,this.activeDay=t,this.interval.active="end"));case"end":return void(this.isSetEnddate(t)&&(G(this.interval.start,t)&&(this.interval.start=null,this.interval.active="start"),this.interval.end=t,this.activeDay=t));default:throw new Error("this.interval.active = 'end' || 'start'")}},setIntervalActive:function(t){this.interval.active=t},isSetStartdate:function(t){return G(t,X(new Date,1))||Object(Y["a"])(t,this.interval.end)},isSetEnddate:function(t){return G(t,X(new Date,1))||Object(Y["a"])(t,this.interval.start)}}},tt=Z,et=(i("7b17"),Object(_["a"])(tt,A,U,!1,null,null,null)),it=et.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.setValue,expression:"setValue"}],ref:"textarea",class:["form__field",{errors:t.$attrs.error}],attrs:{id:t.$attrs.id},domProps:{value:t.setValue},on:{input:function(e){e.target.composing||(t.setValue=e.target.value)}}}),t._v(" "),t._t("label")],2)},st=[],at={inheritAttrs:!1,name:"FormTextarea",props:{value:{default:"",type:String}},computed:{setValue:{get:function(){return this.value},set:function(t){this.textarea_resize(),this.$emit("input",t)}}},watch:{value:function(t){t||this.textarea_clearResize()}},methods:{textarea_resize:function(){this.$refs.textarea.style.height="5px",this.$refs.textarea.style.height=this.$refs.textarea.scrollHeight+"px"},textarea_clearResize:function(){this.$refs.textarea.style.height="41px"}}},rt=at,ct=(i("e435"),Object(_["a"])(rt,nt,st,!1,null,null,null)),ot=ct.exports,ut=i("37d0"),lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outside,expression:"outside"}]},[i("div",{class:[{focus:t.isFocus},{errors:t.$attrs.error},"multi-field"]},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.textSubtask,expression:"textSubtask"}],ref:"input",staticClass:"form__field",attrs:{placeholder:t.$attrs.placeholder,id:t.$attrs.id,type:"text",autocomplete:"off"},domProps:{value:t.textSubtask},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.pushSubtask())},focus:function(e){t.focus=!0},input:function(e){e.target.composing||(t.textSubtask=e.target.value)}}}),t._t("label"),i("button",{staticClass:"btn btn-ghost-primary btn-square",attrs:{type:"button"},on:{click:function(e){return t.pushSubtask()}}},[t._v(" + ")])],2),t.value.length?i("ul",{staticClass:"dropdown"},t._l(t.value,(function(e,n){return i("Field-List-Item",{key:n,attrs:{item:e},on:{"change-item":function(e){return t.changeItem(n,e)},"delete-item":function(e){return t.deleteItem(n)}}})})),1):t._e()])},dt=[],pt=(i("a434"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.changeItem,expression:"changeItem"}],staticClass:"dropdown__content"},[t.settings?i("span",{staticClass:"dropdown__item",on:{click:function(e){return t.changeSettings()}}},[t._v(t._s(t.item)+" "),i("i",{staticClass:"icon-close",on:{click:function(e){return e.stopPropagation(),t.$emit("delete-item")}}})]):i("span",{staticClass:"dropdown__item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.setValue,expression:"setValue"}],ref:"input-edit",staticClass:"dropdown__item-input",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.setValue},on:{input:function(e){e.target.composing||(t.setValue=e.target.value)}}}),i("i",{staticClass:"icon-edit",on:{click:function(e){return e.stopPropagation(),t.changeItem()}}})])])}),ht=[],ft={props:{item:{default:"",type:String}},data:function(){return{settings:!0,copyItem:this.item}},computed:{setValue:{get:function(){return this.copyItem},set:function(t){this.copyItem=t,this.mixin_textarea_resize(this.$refs["input-edit"])}}},methods:{changeItem:function(){this.settings=!0,this.copyItem!=this.item?this.$emit("change-item",this.copyItem):this.copyItem=this.item},changeSettings:function(){var t=this;this.settings=!1,this.$nextTick((function(){t.$refs["input-edit"].focus()}))}}},vt=ft,mt=(i("7cb0"),Object(_["a"])(vt,pt,ht,!1,null,"215eea7a",null)),bt=mt.exports,yt={inheritAttrs:!1,props:{value:{default:function(){return[]},type:Array}},components:{FieldListItem:bt},data:function(){return{textSubtask:"",focus:!1}},computed:{isFocus:function(){return this.focus||this.textSubtask}},methods:{pushSubtask:function(){if(this.$refs.input.focus(),""!==this.textSubtask){var t=Object(r["a"])(this.value);t.push(this.textSubtask),this.$emit("input",t)}this.textSubtask=""},changeItem:function(t,e){var i=Object(r["a"])(this.value);i[t]=e,this.$emit("input",i)},deleteItem:function(t){var e=Object(r["a"])(this.value);e.splice(t,1),this.$emit("input",e)},outside:function(){this.focus=!1}}},_t=yt,gt=(i("7c5d"),Object(_["a"])(_t,lt,dt,!1,null,"7d5e74a7",null)),kt=gt.exports,xt=i("b5ae"),wt=i("2f62"),Ot={data:function(){return{field:[],users:[]}},components:{FormFactory:ut["a"]},created:function(){this.$store.dispatch("users/getUsersDepartment"),this.fields=[{component:o["a"],label:"Заголовок",name:"title",options:{attrs:{placeholder:"Заголовок"}},validation:{required:xt["required"],minLength:Object(xt["minLength"])(10)}},{component:ot,label:"Описание",name:"subtitle",options:{attrs:{placeholder:"Описание"}},validation:{required:xt["required"],minLength:Object(xt["minLength"])(10)}},{component:it,label:"Сроки выполнения",name:"date",options:{attrs:{placeholder:"Сроки выполнения"}},validation:{required:xt["required"]}},{component:new L(new p).makeMultiSelect(),label:"Назначить сотрудников",name:"executor",options:{attrs:{placeholder:"Назначить сотрудников"},props:{selectList:this.users,searchProp:"name"},defaultValue:[]},validation:{required:xt["required"]}},{component:new L(new p).makeSelect(),label:"Приоритет",name:"type",options:{attrs:{placeholder:"Приоритет"},props:{selectList:["Высокий","Средний","Низкий"]}},validation:{required:xt["required"]}},{component:kt,label:"Структура выполнения",name:"subtasks",options:{attrs:{placeholder:"Структура выполнения"},defaultValue:[]},validation:{}}]},computed:Object(c["a"])({},Object(wt["b"])("users",{getUsers:"getRangeLevelUsers"})),watch:{getUsers:function(t){var e;(e=this.users).push.apply(e,Object(r["a"])(t))}},methods:{inputValue:function(t){var e=t.date.split("/"),i=Object(a["a"])(e,2),n=i[0],s=i[1],r={start:n,end:s},o=t.executor.map((function(t){return t.user_id})),u=t.subtitle.replace(/\n/g,"<br/>");this.$store.dispatch("tasks/setTask",Object(c["a"])(Object(c["a"])({},t),{},{date:r,executor:o,subtitle:u}))}}},Ct=Ot,jt=Object(_["a"])(Ct,n,s,!1,null,null,null);e["default"]=jt.exports},"37b8":function(t,e,i){},"579b":function(t,e,i){},"5c19":function(t,e,i){},6462:function(t,e,i){},"65e0":function(t,e,i){"use strict";var n=i("d2b5"),s=i.n(n);s.a},7916:function(t,e,i){"use strict";var n=i("5c19"),s=i.n(n);s.a},"7b17":function(t,e,i){"use strict";var n=i("317d"),s=i.n(n);s.a},"7c5d":function(t,e,i){"use strict";var n=i("d438"),s=i.n(n);s.a},"7cb0":function(t,e,i){"use strict";var n=i("579b"),s=i.n(n);s.a},"841c":function(t,e,i){"use strict";var n=i("d784"),s=i("825a"),a=i("1d80"),r=i("129f"),c=i("14c3");n("search",1,(function(t,e,i){return[function(e){var i=a(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var a=s(t),o=String(this),u=a.lastIndex;r(u,0)||(a.lastIndex=0);var l=c(a,o);return r(a.lastIndex,u)||(a.lastIndex=u),null===l?-1:l.index}]}))},"9c52":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["dropdown__item",{active:t.params.isActive},{selected:t.params.isSelected}]},[t._v(" "+t._s(t.item)+" ")])},s=[],a={props:{item:{default:"",type:String},params:{default:function(){},type:[Object,Array]}}},r=a,c=(i("d970"),i("2877")),o=Object(c["a"])(r,n,s,!1,null,"040ecafa",null);e["a"]=o.exports},a396:function(t,e,i){"use strict";var n=i("aee4"),s=i.n(n);s.a},a613:function(t,e,i){},aa23:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"select__header"},[t._v(t._s(t.value))])},s=[],a=(i("a9e3"),{props:{value:[Number,String]}}),r=a,c=(i("65e0"),i("2877")),o=Object(c["a"])(r,n,s,!1,null,"4564c1a0",null);e["a"]=o.exports},aee4:function(t,e,i){},cece:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outside,expression:"outside"}],staticClass:"select",on:{click:function(e){return t.inside()}}},[i("div",{class:[{focus:t.showList},{errors:t.$attrs.error},"multi-field"]},[t._t("default",null,{value:t.value}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.setTextInput,expression:"setTextInput"}],ref:"input",class:[{show:"select"===this.type},"form__field"],attrs:{type:"text"},domProps:{value:t.setTextInput},on:{focus:function(e){return t.onShowList()},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.onKeyUp()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.onKeyDown()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.onBackspace()}],input:function(e){e.target.composing||(t.setTextInput=e.target.value)}}}),i("div",{staticClass:"select__icon",on:{click:function(e){return t.closeIcon(e)}}},[i("i",{staticClass:"icon-arrow-top",style:t.styleConfig})]),t._t("label")],2),i("Transition-Expand",{attrs:{time:.5}},[t.showList?i("ul",{ref:"list",staticClass:"dropdown"},t._l(t.search,(function(e,n){return i("li",{key:n,staticClass:"select__item",on:{click:function(i){return t.clickItem(e)}}},[t._t("list",null,{item:e,params:{isActive:t.isActive(n),isSelected:t.isSelected(e)}})],2)})),0):t._e()])],1)},s=[],a=(i("99af"),i("4de4"),i("caad"),i("c975"),i("d81d"),i("13d5"),i("fb6a"),i("a434"),i("ac1f"),i("2532"),i("841c"),i("53ca")),r=i("2909"),c=i("cabc"),o={name:"field-select",inheritAttrs:!1,provide:function(){return{clickItem:this.clickItem}},components:{TransitionExpand:c["a"]},props:{value:{default:function(){return[]},type:[String,Array]},type:{default:"select",type:String},selectList:{default:function(){return[]},type:Array},searchProp:{default:"",type:String},dropValue:{default:!1,type:Boolean}},data:function(){return{showList:!1,toggleBackspace:!0,textInput:"",activeUser:null}},computed:{list:function(){var t=this;return[function(){if(t.dropValue)return t.$attrs.placeholder}()].concat(Object(r["a"])(this.selectList))},styleConfig:function(){return this.showList?{transform:"translate(-50%, -50%) rotate(180deg)"}:{}},search:function(){var t=this;return this.searchProp?this.list.filter((function(e){return e[t.searchProp].toLowerCase().includes(t.textInput.toLowerCase())})):this.list},heightArrayElementList:function(){return Array.prototype.map.call(this.$refs.list.children,(function(t){return+window.getComputedStyle(t).height.slice(0,-2)}))},heightElementList:function(){var t=(+window.getComputedStyle(this.$refs.list.children[0])["marginTop"].slice(0,-2)+ +window.getComputedStyle(this.$refs.list.children[0])["marginBottom"].slice(0,-2))/2;return this.heightArrayElementList.slice(0,this.activeUser?this.activeUser-1:this.activeUser).reduce((function(e,i){return e+(i+t)}),0)},setTextInput:{get:function(){return this.textInput},set:function(t){this.textInput=t,this.toggleBackspace=!1}}},methods:{outside:function(){this.showList=!1,this.$refs.input.blur(),this.activeUser=null,this.textInput=""},inside:function(){this.$refs.input.focus()},onShowList:function(){this.showList=!0},closeIcon:function(t){this.showList&&(t.stopPropagation(),this.outside())},onEnter:function(){null!==this.activeUser&&this.clickItem(this.search[this.activeUser])},onBackspace:function(){this.toggleBackspace&&"object"===Object(a["a"])(this.value)&&this.$emit("input",this.value.slice(0,this.value.length-1)),this.textInput||(this.toggleBackspace=!0)},onKeyUp:function(){0!==this.activeUser?this.activeUser-=1:this.activeUser=this.search.length-1,this.scrollUp()},onKeyDown:function(){this.activeUser!==this.search.length-1?this.activeUser+=1:this.activeUser=0,this.scrollUp()},scrollUp:function(){this.$refs.list.scrollTop=+this.heightElementList},clickItem:function(t){switch(this.type){case"select":if(this.outside(),t===this.$attrs.placeholder)return void this.$emit("input","");this.$emit("input",t);break;case"multiSelect":var e=Object(r["a"])(this.value),i=e.indexOf(t);-1!==i?e.splice(i,1):e.push(t),this.$emit("input",e);break;default:break}},isSelected:function(t){var e=t.user_id;return Object.prototype.hasOwnProperty.call(this.value,e)},isActive:function(t){return this.activeUser===t}}},u=o,l=(i("160a"),i("2877")),d=Object(l["a"])(u,n,s,!1,null,"dc4f874c",null);e["a"]=d.exports},d2b5:function(t,e,i){},d438:function(t,e,i){},d970:function(t,e,i){"use strict";var n=i("37b8"),s=i.n(n);s.a},e330:function(t,e,i){},e435:function(t,e,i){"use strict";var n=i("6462"),s=i.n(n);s.a},fc58:function(t,e,i){"use strict";var n=i("e330"),s=i.n(n);s.a}}]);
//# sourceMappingURL=chunk-25ea1742.b36b6931.js.map